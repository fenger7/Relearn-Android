var __spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},SydFSCHelper;(function(n){function ai(i){var it,rt,ut,ft,et,ht,ct,lt,at,vt,yt,pt,wt,dt,gt,ti,ii,ri,ui,oi,hi,ci,li,ai,ki,gi,nr,tr,ir,rr,ur,fr,or,sr,hr,cr,lr,ar,vr,yr,pr,wr,br,kr,dr,gr,nu,tu,iu,ru,uu,fu,eu,ou,su,hu,cu,lu,au,vu,yu,pu,wu,bu,ku,du,gu,nf,tf,rf,uf,ff,ef,sf,hf,cf,lf,af,vf,yf,pf,wf,bf,kf,df,gf,ne,te,ie,re,ue,fe,ee,oe,se,he,ce,le,ae,ve,ye,pe,we,be,ke,de,ge,no,to,io,ro,uo,fo,eo,oo,so,ho,co,lo,ao,vo,yo,po,wo,bo,ko,go,ns,ts,is,rs,us,fs,es,os,ss,hs,cs,ls,as,vs,ys,ps,ws,bs,ks,ds,gs,nh,th,ih,rh,uh,fh,eh,ov,lh,r,e,o,v,y,f,p,ah,vh,yh,ph,u,wh,bh,k,kh,dh,w,g,gh,h,nt,sv,c,tt,nc,tc;i===void 0&&(i=null);n.isConfigSet=!0;var ic=t((it=_w._sydConvConfig)===null||it===void 0?void 0:it.country,!1),rc=t((rt=_w._sydConvConfig)===null||rt===void 0?void 0:rt.countryConfidence,!1),uc=t((ut=_w._sydConvConfig)===null||ut===void 0?void 0:ut.state,!1),fc=t((ft=_w._sydConvConfig)===null||ft===void 0?void 0:ft.city,!1),ec=t((et=_w._sydConvConfig)===null||et===void 0?void 0:et.cityConfidence,!1),oc=t((ht=_w._sydConvConfig)===null||ht===void 0?void 0:ht.zip,!1),sc=t((ct=_w._sydConvConfig)===null||ct===void 0?void 0:ct.timezoneoffset,!1),hc=t((lt=_w._sydConvConfig)===null||lt===void 0?void 0:lt.dma,!1),cc=t((at=_w._sydConvConfig)===null||at===void 0?void 0:at.lat,!1),lc=t((vt=_w._sydConvConfig)===null||vt===void 0?void 0:vt.long,!1),ac=t((yt=_w._sydConvConfig)===null||yt===void 0?void 0:yt.noInitOpts,!1),cv=t((pt=_w._sydConvConfig)===null||pt===void 0?void 0:pt.overrideSydOptions,!1),l=t((wt=_w._sydConvConfig)===null||wt===void 0?void 0:wt.sydOptionSets,!1),vc=t((dt=_w._sydConvConfig)===null||dt===void 0?void 0:dt.extraSappOptions,""),yc=t((gt=_w._sydConvConfig)===null||gt===void 0?void 0:gt.extraEdgeOptions,""),pc=t((ti=_w._sydConvConfig)===null||ti===void 0?void 0:ti.sydUrlPart,!1),lv=t((ii=_w._sydConvConfig)===null||ii===void 0?void 0:ii.removeDeepleo,!1),oh=t((ri=_w._sydConvConfig)===null||ri===void 0?void 0:ri.isSydCorpnet,!1),av=t((ui=_w._sydConvConfig)===null||ui===void 0?void 0:ui.enableSydOverlay,!1),vv=t((oi=_w._sydConvConfig)===null||oi===void 0?void 0:oi.enableEdgeMobileNativeTTS,!1),yv=t((hi=_w._sydConvConfig)===null||hi===void 0?void 0:hi.isVisualParityRun,!1),wc=t((ci=_w._sydConvConfig)===null||ci===void 0?void 0:ci.sydBaseUrl,!1),sh=t((li=_w._sydConvConfig)===null||li===void 0?void 0:li.isCompliantSydneyEndpointEnabled,!1),bc=t((ai=_w._sydConvConfig)===null||ai===void 0?void 0:ai.sydIDs,""),kc=t((ki=_w._sydConvConfig)===null||ki===void 0?void 0:ki.traceId,""),dc=t(_w._sydConvTranslation,{}),pv=t((gi=_w._sydConvConfig)===null||gi===void 0?void 0:gi.enableSydMic,!1),wv=t((nr=_w._sydConvConfig)===null||nr===void 0?void 0:nr.enableSydShare,!1),bv=t((tr=_w._sydConvConfig)===null||tr===void 0?void 0:tr.addDv3Opt,!1),kv=t((ir=_w._sydConvConfig)===null||ir===void 0?void 0:ir.addGenContentv3Opt,!1),dv=t((rr=_w._sydConvConfig)===null||rr===void 0?void 0:rr.enable161Feats,!0),gv=t((ur=_w._sydConvConfig)===null||ur===void 0?void 0:ur.enableAnsCardSuffix,!1),ny=t((fr=_w._sydConvConfig)===null||fr===void 0?void 0:fr.removeDSAT,!0),gc=t((or=_w._sydConvConfig)===null||or===void 0?void 0:or.enableErrorTelemetry,!1),nl=t((sr=_w._sydConvConfig)===null||sr===void 0?void 0:sr.enableSpeechExperimentalFeatures,!1),tl=t((hr=_w._sydConvConfig)===null||hr===void 0?void 0:hr.enableSpeechChatDataAfterPhrase,!1),il=t((cr=_w._sydConvConfig)===null||cr===void 0?void 0:cr.enableSpeechEarconOnInput,!1),rl=t((lr=_w._sydConvConfig)===null||lr===void 0?void 0:lr.enableSimpleVoiceInput,!1),ul=t((ar=_w._sydConvConfig)===null||ar===void 0?void 0:ar.enableSpeechFateTTSStop,!1),fl=t((vr=_w._sydConvConfig)===null||vr===void 0?void 0:vr.enableSpeechGetUserMedia,!1),ty=t((yr=_w._sydConvConfig)===null||yr===void 0?void 0:yr.enableSydCLOC,!1),iy=t((pr=_w._sydConvConfig)===null||pr===void 0?void 0:pr.enableCdxFeats,!1),el=t((wr=_w._sydConvConfig)===null||wr===void 0?void 0:wr.cdxFeats,""),ry=t((br=_w._sydConvConfig)===null||br===void 0?void 0:br.disableSecureUpdateConversation,!1),uy=t((kr=_w._sydConvConfig)===null||kr===void 0?void 0:kr.disableSecureSendFeedback,!1),fy=t((dr=_w._sydConvConfig)===null||dr===void 0?void 0:dr.enableFdbkFinalized,!1),ey=t((gr=_w._sydConvConfig)===null||gr===void 0?void 0:gr.enableSemSerpShare,!1),oy=t((nu=_w._sydConvConfig)===null||nu===void 0?void 0:nu.enableCreatorShare,!1),sy=t((tu=_w._sydConvConfig)===null||tu===void 0?void 0:tu.enableShareModalDialog,!1),hy=t((iu=_w._sydConvConfig)===null||iu===void 0?void 0:iu.enableDM,!1),ol=t((ru=_w._sydConvConfig)===null||ru===void 0?void 0:ru.enableSydImageCreate,!1),hh=t((uu=_w._sydConvConfig)===null||uu===void 0?void 0:uu.enableVisualSearch,!1),cy=t((fu=_w._sydConvConfig)===null||fu===void 0?void 0:fu.enableSecureConnect,!0),ly=t((eu=_w._sydConvConfig)===null||eu===void 0?void 0:eu.enableShortOpt,!1),ay=t((ou=_w._sydConvConfig)===null||ou===void 0?void 0:ou.enablePuidOvr,!1),sl=t((su=_w._sydConvConfig)===null||su===void 0?void 0:su.enablePerfTrk,!1),vy=t((hu=_w._sydConvConfig)===null||hu===void 0?void 0:hu.enableEmbeddedPerf,!1),hl=t((cu=_w._sydConvConfig)===null||cu===void 0?void 0:cu.enableSinglePerfEventPerMessage,!1),cl=t((lu=_w._sydConvConfig)===null||lu===void 0?void 0:lu.enableUnauthRedir,!1),ll=t((au=_w._sydConvConfig)===null||au===void 0?void 0:au.enableSpeechErrorHandling,!1),al=t((vu=_w._sydConvConfig)===null||vu===void 0?void 0:vu.enableSpeechAriaLabel,!1),vl=t((yu=_w._sydConvConfig)===null||yu===void 0?void 0:yu.enableSpeechReopenMic,!1),yl=t((pu=_w._sydConvConfig)===null||pu===void 0?void 0:pu.enableSpeechTTSLatencyLogging,!1),pl=t((wu=_w._sydConvConfig)===null||wu===void 0?void 0:wu.enableSpeechInputWhileRequestIsPending,!1),wl=t((bu=_w._sydConvConfig)===null||bu===void 0?void 0:bu.enableSpeechIconDarkTheme,!1),yy=t((ku=_w._sydConvConfig)===null||ku===void 0?void 0:ku.enableNewTopicAutoExpand,!1),py=t((du=_w._sydConvConfig)===null||du===void 0?void 0:du.enableMaxTurnsPerConversation,!1),wy=t((gu=_w._sydConvConfig)===null||gu===void 0?void 0:gu.enableAmberTurnPerConversation,!1),by=t((nf=_w._sydConvConfig)===null||nf===void 0?void 0:nf.maxMessageLength,ni),ky=t((tf=_w._sydConvConfig)===null||tf===void 0?void 0:tf.isAccountLinkedWithActiveAAD,!1),dy=t((rf=_w._sydConvConfig)===null||rf===void 0?void 0:rf.enableThreadsAADMSASwitch,!1),bl=t((uf=_w._sydConvConfig)===null||uf===void 0?void 0:uf.enableTelemetryPrivacy,!1),gy=t((ff=_w._sydConvConfig)===null||ff===void 0?void 0:ff.enableSydSafeSearch,!1),np=t((ef=_w._sydConvConfig)===null||ef===void 0?void 0:ef.enableFeedbackClientSideScreenshot,!1),tp=t((sf=_w._sydConvConfig)===null||sf===void 0?void 0:sf.syntheticStreamSpeed,fi),ip=t((hf=_w._sydConvConfig)===null||hf===void 0?void 0:hf.enableTypingIndicatorAnimation,!1),rp=t((cf=_w._sydConvConfig)===null||cf===void 0?void 0:cf.typingIndicatorAnimationDuration,ei),up=t((lf=_w._sydConvConfig)===null||lf===void 0?void 0:lf.disableShareWithNoMargin,!1),fp=t((af=_w._sydConvConfig)===null||af===void 0?void 0:af.enableMobileShareAnchorLeft,!1),ep=t((vf=_w._sydConvConfig)===null||vf===void 0?void 0:vf.enableCreativeLandingPage,!1),op=t((yf=_w._sydConvConfig)===null||yf===void 0?void 0:yf.enableServerLogMerging,!1),kl=t((pf=_w._sydConvConfig)===null||pf===void 0?void 0:pf.enableOneClickCopy,!1),dl=t((wf=_w._sydConvConfig)===null||wf===void 0?void 0:wf.enableCodeCopy,!1),gl=t((bf=_w._sydConvConfig)===null||bf===void 0?void 0:bf.enableRichTextPaste,!1),sp=t((kf=_w._sydConvConfig)===null||kf===void 0?void 0:kf.enableSkipContentOriginCheck,!1),hp=t((df=_w._sydConvConfig)===null||df===void 0?void 0:df.enableMobileOneClickShare,!1),cp=t((gf=_w._sydConvConfig)===null||gf===void 0?void 0:gf.enableMobileOneClickShareV2,!1),lp=t((ne=_w._sydConvConfig)===null||ne===void 0?void 0:ne.enableFeedbackInstrumentation,!1),ap=t((te=_w._sydConvConfig)===null||te===void 0?void 0:te.enableSuggEndFix,!1),vp=t((ie=_w._sydConvConfig)===null||ie===void 0?void 0:ie.enableAutoRecoverFromInvalidSession,!1),yp=t((re=_w._sydConvConfig)===null||re===void 0?void 0:re.enableAutoRecoverFromInvalidSessionForFirstTurn,!1),pp=t((ue=_w._sydConvConfig)===null||ue===void 0?void 0:ue.enableActionBarIMEFix,!1),na=t((fe=_w._sydConvConfig)===null||fe===void 0?void 0:fe.enableInlineFeedback,!1),ta=t((ee=_w._sydConvConfig)===null||ee===void 0?void 0:ee.enableInlineFeedbackV2,!1),ia=t((oe=_w._sydConvConfig)===null||oe===void 0?void 0:oe.enableSerpFeedback,!1),ra=t((se=_w._sydConvConfig)===null||se===void 0?void 0:se.enableMessageExport,!1),ua=t((he=_w._sydConvConfig)===null||he===void 0?void 0:he.enableMessageExportWithPlainText,!1),fa=t((ce=_w._sydConvConfig)===null||ce===void 0?void 0:ce.enableMessageExportOnlineWord,!1),ea=t((le=_w._sydConvConfig)===null||le===void 0?void 0:le.enableMessageExportOnlineExcel,!1),oa=t((ae=_w._sydConvConfig)===null||ae===void 0?void 0:ae.enableThreadExportOnlineWord,!1),sa=t((ve=_w._sydConvConfig)===null||ve===void 0?void 0:ve.enableCopyHtml,!1),ha=t((ye=_w._sydConvConfig)===null||ye===void 0?void 0:ye.enableExportPdfWithAnswerScreenshot,!1),ca=t((pe=_w._sydConvConfig)===null||pe===void 0?void 0:pe.enableExportDocxWithAnswerScreenshot,!1),la=t((we=_w._sydConvConfig)===null||we===void 0?void 0:we.enableFlatActionBar,!1),aa=t((be=_w._sydConvConfig)===null||be===void 0?void 0:be.codexMUIDUser,!1),va=t((ke=_w._sydConvConfig)===null||ke===void 0?void 0:ke.enableFixCodeXAsBug,!1),ya=t((de=_w._sydConvConfig)===null||de===void 0?void 0:de.enableShareQuestionWithResponse,!1),pa=t((ge=_w._sydConvConfig)===null||ge===void 0?void 0:ge.enableShareQuestionTitlePrefix,!1),wa=t((no=_w._sydConvConfig)===null||no===void 0?void 0:no.enableShareInlineAdsIframe,!1),ba=t((to=_w._sydConvConfig)===null||to===void 0?void 0:to.enableScreenshotIgnoreOnCibSerp,!1),ka=t((io=_w._sydConvConfig)===null||io===void 0?void 0:io.enableStandaloneUtility,!1);n.enableCreatorSendQueryWhenShowConvQuery=t((ro=_w._sydConvConfig)===null||ro===void 0?void 0:ro.enableCreatorSendQueryWhenShowConvQuery,!0);var wp=t((uo=_w._sydConvConfig)===null||uo===void 0?void 0:uo.enableCodexWin,!1),bp=t((fo=_w._sydConvConfig)===null||fo===void 0?void 0:fo.enableCodexWinBotMessage,!1),kp=t((eo=_w._sydConvConfig)===null||eo===void 0?void 0:eo.codexWinCurrentTurn,0),dp=t((oo=_w._sydConvConfig)===null||oo===void 0?void 0:oo.enableGetChats,!1),da=t((so=_w._sydConvConfig)===null||so===void 0?void 0:so.enableNewTables,!1),gp=t((ho=_w._sydConvConfig)===null||ho===void 0?void 0:ho.codexTableVersion,1),nw=t((co=_w._sydConvConfig)===null||co===void 0?void 0:co.enableExportDocxWithFormat,!1),tw=t((lo=_w._sydConvConfig)===null||lo===void 0?void 0:lo.enableDisposeOrphanedHosts,!1),iw=t((ao=_w._sydConvConfig)===null||ao===void 0?void 0:ao.enablePreserveTextFormat,!1),rw=t((vo=_w._sydConvConfig)===null||vo===void 0?void 0:vo.enableHoverCardOnLearnMorePills,!1),uw=t((yo=_w._sydConvConfig)===null||yo===void 0?void 0:yo.enableWowCDSSurvey,!1),ga=t((po=_w._sydConvConfig)===null||po===void 0?void 0:po.enableSydBeacon,!1),fw=t((wo=_w._sydConvConfig)===null||wo===void 0?void 0:wo.enableShareOnHostMessage,!1),ew=t((bo=_w._sydConvConfig)===null||bo===void 0?void 0:bo.disablePassBotGreetingInContext,!1),nv=t((ko=_w._sydConvConfig)===null||ko===void 0?void 0:ko.enableThreadContextMenu,!1),ow=t((go=_w._sydConvConfig)===null||go===void 0?void 0:go.enableCloudflareCaptcha,!1),sw=t((ns=_w._sydConvConfig)===null||ns===void 0?void 0:ns.enableResizeObserverWithAnimationFrame,!1),hw=t((ts=_w._sydConvConfig)===null||ts===void 0?void 0:ts.enableKnowledgeCardImage,!1),tv=t((is=_w._sydConvConfig)===null||is===void 0?void 0:is.enableStartPromotion,!1),cw=t((rs=_w._sydConvConfig)===null||rs===void 0?void 0:rs.enableCopyButtonInstrumented,!1),lw=t((us=_w._sydConvConfig)===null||us===void 0?void 0:us.enableThreadSync,!1),aw=t((fs=_w._sydConvConfig)===null||fs===void 0?void 0:fs.enableMobileKnowledgeCardOverlay,!1),ch=t((es=_w._sydConvConfig)===null||es===void 0?void 0:es.enableFlux3P,!1),vw=t((os=_w._sydConvConfig)===null||os===void 0?void 0:os.enableCodexTesthooks,!1),yw=t((ss=_w._sydConvConfig)===null||ss===void 0?void 0:ss.enableTestTurnLimit,!1),pw=t((hs=_w._sydConvConfig)===null||hs===void 0?void 0:hs.enableTestDailyLimit,!1),iv=t((cs=_w._sydConvConfig)===null||cs===void 0?void 0:cs.flux3PPluginList,""),ib=t((ls=_w._sydConvConfig)===null||ls===void 0?void 0:ls.enableTestCodexTurnLimit,!1),rb=t((as=_w._sydConvConfig)===null||as===void 0?void 0:as.enableTestCodexDailylimit,!1),rv=t((vs=_w._sydConvConfig)===null||vs===void 0?void 0:vs.disableWelcomeScreen,!1),ww=t((ys=_w._sydConvConfig)===null||ys===void 0?void 0:ys.enableWelcomeScreenV2,!1),uv=t((ps=_w._sydConvConfig)===null||ps===void 0?void 0:ps.enableWebPageContextMessages,!1),bw=t((ws=_w._sydConvConfig)===null||ws===void 0?void 0:ws.enableCodexPluginb,!1),kw=t((bs=_w._sydConvConfig)===null||bs===void 0?void 0:bs.enableNewAutoSuggestEndPoint,!1),dw=t((ks=_w._sydConvConfig)===null||ks===void 0?void 0:ks.enable2TQueryConfigsOnSerpLoad,!1),fv=t((ds=_w._sydConvConfig)===null||ds===void 0?void 0:ds.enableSydStaticAdsLink,!1),gw=t((gs=_w._sydConvConfig)===null||gs===void 0?void 0:gs.isMobileHost,!1),nb=t((nh=_w._sydConvConfig)===null||nh===void 0?void 0:nh.enableRenderCardRequestIMSearchParams,!1),ev=t((th=_w._sydConvConfig)===null||th===void 0?void 0:th.EnableMessagePrivacy,!1);for(wp&&(sj_cook.set(n.userCook,si,String(kp+1),!0,"/",null),bp&&(n.shouldForceSendBotGreeting=!0)),uw&&(CIB.config.features.enableWowCDSSurvey=!0),ov=_ge("cib-design-tokens"),ov||CIB.activateDesignTokens(),lh=sh?Intl.DateTimeFormat().resolvedOptions().timeZone:undefined,r={},ic&&(r.country=ic),uc&&(r.state=uc),fc&&(r.city=fc),oc&&(r.zipcode=oc),sc&&(r.timezoneoffset=parseFloat(sc)),lh&&(r.timezone=lh),hc&&(r.dma=hc),cc&&(r.latitude=parseFloat(cc)),lc&&(r.longitude=parseFloat(lc)),rc&&(r.countryConfidence=rc),ec&&(r.cityConfidence=ec),e=[],i&&typeof i.cookLoc!="undefined"?(i.cookLoc.userLoc&&(o=b(i.cookLoc.userLoc,!1),o.RegionType=1,o.SourceType=2,o.FDConfidence=1,e.push(o)),i.cookLoc.deviceLoc&&(v=b(i.cookLoc.deviceLoc,!1),v.RegionType=2,v.SourceType=5,e.push(v)),ty&&i.cookLoc.coarseLoc&&(y=b(i.cookLoc.coarseLoc,!1),y.RegionType=2,y.SourceType=11,e.push(y)),f=r,f.Center={Latitude:f.latitude,Longitude:f.longitude},delete f.latitude,delete f.longitude,f.RegionType=2,f.SourceType=1,e.push(f),CIB.config.sydney.message.locationHints=e):CIB.config.sydney.message.locationinfo=r,CIB.config.sydney.message.timestamp=er(),p=0,ah=Object.keys(dc);p<ah.length;p++)vh=ah[p],CIB.config.strings[vh]=dc[vh];if(dp&&(CIB.config.features.enableGetChats=!0),lw&&(CIB.config.features.enableThreadSync=!0),ch&&(CIB.config.features.enableFlux3P=!0,typeof CIB.config.plugin=="undefined"&&(CIB.config.plugin={}),iv.length>0&&(CIB.config.plugin.pluginList=JSON.parse(iv))),bw&&(CIB.config.features.enableOpenTableBookBlueLink=!0),nb&&(CIB.config.features.enableRenderCardRequestIMSearchParams=!0),sh||bi(),yh=new URLSearchParams(_w.location.search.toLowerCase()),ph=yh.get(bt.toLowerCase()),(ac||l!=""||oh&&ph||vc||yc)&&(u=ac?[]:CIB.config.sydney.request.optionsSets,u=s(u,l),oh&&(u=s(u,ph)),u=s(u,vc),u=s(u,yc),lv&&(wh=u.indexOf("deepleo"),wh>=0&&u.splice(wh,1)),CIB.config.sydney.request.optionsSets=u),ny&&(bh=CIB.config.sydney.request.optionsSets.indexOf("enable_debug_commands"),bh>=0&&CIB.config.sydney.request.optionsSets.splice(bh,1)),bv&&CIB.config.sydney.request.optionsSets.push("dv3sugg"),kv&&CIB.config.sydney.request.optionsSets.push("gencontentv3"),ly&&CIB.config.sydney.request.optionsSets.push("prodshortv4"),cv&&l!=""&&(CIB.config.sydney.request.optionsSets=s([],l)),iy){if(el)for(w=el.split(","),k=0,kh=w;k<kh.length;k++)h=kh[k],CIB.config.features[h]=!0;if(dh=yh.get(kt.toLowerCase()),oh&&dh)for(w=dh.split(","),g=0,gh=w;g<gh.length;g++)h=gh[g],h.indexOf(":")>=0&&(nt=h.split(":"),nt.length==2&&(CIB.config.features[nt[0]]=nt[1]))}if(bc&&(sv=bc.split(","),CIB.config.sydney.request.sliceIds=sv),CIB.config.bing.isVisualParityRun=yv,wc&&(CIB.config.sydney.baseUrl=wc),pc!=""&&(CIB.config.sydney.pathBase=pc),nl&&(CIB.config.features.enableSpeechExperimental=nl),tl&&(CIB.config.features.enableSpeechChatDataAfterPhrase=tl),il&&(CIB.config.features.enableSpeechEarconOnInput=il),rl&&(CIB.config.features.enableSimpleVoiceInput=rl),ul&&(CIB.config.features.enableSpeechFateTTSStop=ul),fl&&(CIB.config.features.enableSpeechGetUserMedia=fl),ll&&(CIB.config.features.enableSpeechErrorHandling=ll),yl&&(CIB.config.features.enableSpeechTTSLatencyLogging=yl),pl&&(CIB.config.features.enableSpeechInputWhileRequestIsPending=pl),wl&&(CIB.config.features.enableSpeechIconDarkTheme=wl),al&&(CIB.config.features.enableSpeechAriaLabel=al),vl&&(CIB.config.features.enableSpeechReopenMic=vl),vv&&(CIB.config.speech.textToSpeechProvider=SydneySuperAppConnector.getTextToSpeechProvider),va&&(CIB.config.features.enableFixCodeXAsBug=va),ya&&(CIB.config.features.enableShareQuestionWithResponse=ya),pa&&(CIB.config.features.enableShareQuestionTitlePrefix=pa),wa&&(CIB.config.features.enableShareInlineAdsIframe=wa),ba&&(CIB.config.features.enableScreenshotIgnoreOnCibSerp=ba),ka&&(CIB.config.features.enableStandaloneUtility=ka),av&&(CIB.config.features.enableMetaMessages=!1,CIB.config.features.enableLearnMore=!1,CIB.config.features.enableCitations=!1,CIB.config.features.enableWelcomeScreen=!1,CIB.config.features.enableShare=!1,CIB.config.features.enableStopButton=!1,CIB.config.features.enableAnswerCards=!1,CIB.config.features.enableAds=!1),kc&&(CIB.config.sydney.request.traceId=kc),CIB.config.features.enableSpeechInput=pv,CIB.config.features.enableShare=wv,dv&&(CIB.config.features.enableErrorStateNotification=!0,CIB.config.features.enableErrorStateToastNotificationResetButton=!0,CIB.config.features.enableGhostedAutoSuggest=!0,CIB.config.features.enableHoverCardAttributionFavicons=!0),vp&&(CIB.config.features.enableAutoRecoverFromInvalidSession=!0),yp&&(CIB.config.features.enableAutoRecoverFromInvalidSessionForFirstTurn=!0),pp&&(CIB.config.features.enableActionBarIMEFix=!0),gc&&(CIB.config.features.enableErrorInstrumentaton=gc),ol&&(CIB.config.features.enableSydImageCreate=ol),hh&&(CIB.config.features.enableVisualSearch=hh),gv&&(CIB.config.features.enableAnsCardSfx=!0),ip&&(CIB.config.features.enableTypingIndicatorAnimation=!0,CIB.config.messaging.typingIndicatorAnimationDuration=rp),np&&(CIB.config.features.enableFeedbackClientSideScreenshot=!0),aa&&vi(),tw&&(CIB.config.features.enableDisposeOrphanedHosts=!0),iw&&(CIB.config.features.enablePreserveTextFormat=!0),rw&&(CIB.config.features.enableHoverCardOnLearnMorePills=!0),ow&&(CIB.config.features.enableCloudflareCaptcha=!0),sw&&(CIB.config.features.enableResizeObserverWithAnimationFrame=!0),nw&&(CIB.config.features.enableExportDocxWithFormat=!0),CIB.config.features.enableSecureUpdateConversation=!ry,CIB.config.features.enableSecureSendFeedback=!uy,CIB.config.features.enableShareSemSerp=ey,CIB.config.features.enableShareCreator=oy,CIB.config.features.enableFeedbackOnFinalized=fy,CIB.config.features.enableShareWithNoMargin=!up,CIB.config.features.enableMobileShareAnchorLeft=fp,CIB.config.features.enableCreativeLandingPage=ep,CIB.config.features.enableServerLogMerging=op,CIB.config.features.enableSkipContentOriginValidation=sp,CIB.config.features.enableMobileOneClickShare=hp,CIB.config.features.enableMobileOneClickShareV2=cp,CIB.config.features.enableFeedbackInstrumentation=lp,CIB.config.features.enableCopyButtonInstrumented=cw,CIB.config.features.enableShareModalDialog=sy,CIB.config.features.enableShareOnHostMessage=fw,CIB.config.features.enablePassBotGreetingInContext=!ew,CIB.config.features.enableMobileKnowledgeCardOverlay=aw,CIB.config.features.enableNewAutoSuggestEndPoint=kw,CIB.config.messaging.maxMessageLength=by,vw&&(CIB.config.testhooks.enableTestTurnLimit=yw,CIB.config.testhooks.enableTestDailyLimit=pw),CIB.config.features.enableThreadsAadMsaSwitch=dy,CIB.config.messaging.isAccountLinkedAadUser=ky,ww&&(CIB.config.features.enableWelcomeScreen=rv,CIB.config.features.enableWelcomeScreenItem=!rv),hw&&(ch||hh||(CIB.config.features.enableKnowledgeCardImage=!0),CIB.config.features.enableImagesInTextMessages=!0),hy&&CIB.changeColorScheme&&CIB.changeColorScheme(1),CIB.config.features.secureConversation=cy,yy&&(CIB.config.features.enableNewTopicAutoExpand=!0),wy&&(CIB.config.features.enableAmberTurnPerConversation=!0,CIB.config.messaging.amberTurnPerConversation=t((ih=_w._sydConvConfig)===null||ih===void 0?void 0:ih.amberTurnPerConversation,0)),py&&(CIB.config.features.enableMaxTurnsPerConversation=!0,CIB.config.features.enableMaxTurnsFromBackend=t((rh=_w._sydConvConfig)===null||rh===void 0?void 0:rh.enableMaxTurnsFromBackend,!1),CIB.config.messaging.maxTurnsPerConversation=aa?t((uh=_w._sydConvConfig)===null||uh===void 0?void 0:uh.maxTurnsPerConversationMuidUser,a):t((fh=_w._sydConvConfig)===null||fh===void 0?void 0:fh.maxTurnsPerConversation,a)),ay&&(CIB.config.sydney.request.Participant={Id:"1"}),sl&&(CIB.config.features.enablePerfTracker=sl),vy&&(CIB.config.features.enableEmbeddedPerf=!0),hl&&(CIB.config.features.enableSinglePerfEventPerMessage=hl),cl&&(CIB.config.features.enableRedirectToLoginUrl=cl),gy&&(CIB.config.features.enableSafeSearchSetting=!0,di()),CIB.config.messaging.messageBufferWorkerStreamDelayMS=tp,ap&&(CIB.config.suggestions.baseUrl="https://bingai.readbook.gq"),kl&&(CIB.config.features.enableOneClickCopy=kl),dl&&(CIB.config.features.enableCodeCopy=dl),gl&&(CIB.config.features.enableRichTextPaste=gl),na&&(CIB.config.features.enableInlineFeedback=na),ta&&(CIB.config.features.enableInlineFeedbackV2=ta),ia&&(CIB.config.features.enableSerpFeedback=ia),ra&&(CIB.config.features.enableMessageExport=ra),ua&&(CIB.config.features.enableMessageExportWithPlainText=ua),fa&&(CIB.config.features.enableMessageExportOnlineWord=fa),ea&&(CIB.config.features.enableMessageExportOnlineExcel=ea),oa&&(CIB.config.features.enableThreadExportOnlineWord=oa),sa&&(CIB.config.features.enableCopyHtml=sa),ha&&(CIB.config.features.enableExportPdfWithAnswerScreenshot=ha),ca&&(CIB.config.features.enableExportDocxWithAnswerScreenshot=ca),la&&(CIB.config.features.enableFlatActionBar=la),ga&&(CIB.config.features.enableSydBeacon=ga),tv&&(CIB.config.features.enableStartPromotion=tv),nv&&(CIB.config.features.enableThreadContextMenu=nv),da&&(CIB.config.features.enableNewTables=da,CIB.config.messaging.tableVersion=gp),ev&&(CIB.config.features.enableMessagePrivacy=ev),pi(),ch&&(CIB.config.sydney.request.optionsSets.length=0),yi(),uv&&(CIB.config.features.enableContextMessage=uv),c=t((eh=_w._sydConvConfig)===null||eh===void 0?void 0:eh.codexOptionsSetsList,null),c&&c.length>0)for(tt=0;tt<c.length;tt++)CIB.config.sydney.request.optionsSets.push(c[tt].value);if(wi(),dw)if(gw)try{var hv=ClientObserver?ClientObserver.getBrowserWidth():ot(),tb=ClientObserver?ClientObserver.getBrowserHeight():st(),nc=hv-92<n.MIN_WIDTH_MOBILE?n.MIN_WIDTH_MOBILE:hv-92,tc=tb;d(nc,tc,fv)}catch(ub){Log.Log("CI.Error","SydneyMobile","ClientObserver not loaded")}else nc=ClientObserver.getBrowserWidth(),tc=ClientObserver.getBrowserHeight(),d(nc,tc,fv);bl&&(CIB.config.features.enableTelemetryPrivacy=bl);sh&&MsbSydneyHelper.initCompliantSydneyConfigs()}function ot(){var n=Math.round(_d.documentElement.clientWidth||_w.innerWidth);return n<100&&(n=360),n}function st(){var n=Math.round(_d.documentElement.clientHeight||_w.innerHeight);return n<100&&(n=636),n}function vi(){var n,i,r;CIB.config.features.enableMUIDUserMode=!0;CIB.config.features.enableSignInUpsellforMuidUser=!0;var u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableCodexMuidConsentTop,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableCodexMuidConsentExplicit,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableCodexMuidConsentImplicit,!1),o=u||f||e;o&&(CIB.config.features.enableCodexMuidConsentTop=u,CIB.config.features.enableCodexMuidConsentInlineExplicit=f,CIB.config.features.enableCodexMuidConsentInlineImplicit=e,CIB.config.sydney.muidUserConsentGiven=ht(),CIB.onConsentGiven&&CIB.onConsentGiven(function(){gi()}))}function yi(){var r,u,e,o,s,h,c,l,a,v,p=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableShareWholeThreadMockUp,!1),w=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableThreadShareLandingPage,!1),b=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableShareThreadWithNoCache,!1),k=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableThreadShareWithoutRenderCardRequest,!1),d=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableBICHistory,!1),g=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enable2TScreenshot,!1),y=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableThreads,!1),nt=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableThreadsCF,!1),tt=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableFlux3P,!1),n,i;if(p&&(CIB.config.features.enableShareWholeThreadMockUp=p),w&&(CIB.config.features.enableThreadShareLandingPage=w),b&&(CIB.config.features.enableShareThreadWithNoCache=b),k&&(CIB.config.features.enableThreadShareWithoutRenderCardRequest=k),d&&(CIB.config.features.enableBICHistory=d),g&&(CIB.config.features.enableAnswerScreenshot=g),y){if(CIB.config.features.enableThreads=y,n=t((v=_w._sydThreads)===null||v===void 0?void 0:v.threads,null),n&&n.length>0)for(i=0;i<n.length;i++)CIB.addThread(n[i]);tt||CIB.config.sydney.request.optionsSets.push("autosave")}(y||nt)&&f("SystemEvent","THREADS","1","1")}function pi(){var n,i,r,u,f=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableAdSlugsDesktop,!1),e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableAdSlugsMobile,!1),o=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSearchQueryForInlineAds,!1),s=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableDevFormOverrideForAds,!1);f&&(CIB.config.features.enableAdSlugsDesktop=!0);e&&(CIB.config.features.enableAdSlugsMobile=!0);o&&(CIB.config.features.enableSearchQueryForInlineAds=!0);s&&(CIB.config.features.enableDevFormOverrideForAds=!0)}function wi(){var n,i,r,u=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSydneySapphireUpsellMessageActions,!1),f=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydneySapphireUpsellEndOfChat,!1),e=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.sydneySapphireUpsellTreatment,0);u&&(CIB.config.features.enableSydSapphireUpsellOnMessageActions=u,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=e);f&&(CIB.config.features.enableSydSapphireUpsellOnEndOfChat=f,CIB.config.mobileUpsell.sydSapphireUpsellTreatment=e)}function bi(){var s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,pt=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.toneDefault,r),wt=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableToneCook,!1),bt=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableBalDefault,!1),kt=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.userPriorityLevel,999),ni=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableUserPriorityLevel,!1),st=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableTonePerf,!1),ot;((y=_w._sydConvConfig)===null||y===void 0?void 0:y.shareLoadingUI)&&(CIB.config.features.enableShareLoadingUI=!0);var n=!ni||kt>0,ht=n?t((p=_w._sydConvConfig)===null||p===void 0?void 0:p.balTone,""):"harmonyv3",ct=t((w=_w._sydConvConfig)===null||w===void 0?void 0:w.crtTone,""),lt=t((b=_w._sydConvConfig)===null||b===void 0?void 0:b.prcTone,""),at=t((k=_w._sydConvConfig)===null||k===void 0?void 0:k.sydBalOpts,""),vt=t((d=_w._sydConvConfig)===null||d===void 0?void 0:d.sydCrtOpts,""),yt=t((g=_w._sydConvConfig)===null||g===void 0?void 0:g.sydPrcOpts,""),u=n?t((nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.sydBalExtraOpts,""):"",f=n?t((tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.sydCrtExtraOpts,""):"",o=n?t((it=_w._sydConvConfig)===null||it===void 0?void 0:it.sydPrcExtraOpts,""):"";at&&(u+=(u!==""?",":"")+at);vt&&(f+=(f!==""?",":"")+vt);yt&&(o+=(o!==""?",":"")+yt);u&&(e.Balanced=u.split(","));f&&(e.Creative=f.split(","));o&&(e.Precise=o.split(","));ht&&(i[r]=ht);ct&&(i[dt]=ct);lt&&(i[gt]=lt);st&&(CIB.config.features.enableTonePerf=st);CIB.config.features.enableResponseToneSelector=!0;CIB.config.features.enablePersistentResponseToneSelector=t((rt=_w._sydConvConfig)===null||rt===void 0?void 0:rt.enablePersistentToneSelector,!1);CIB.config.features.enableResponseToneObjects=(ft=(ut=_w._sydConvConfig)===null||ut===void 0?void 0:ut.enableSuppressTones)!==null&&ft!==void 0?ft:!1;CIB.config.features.enableResponseToneColorThemes=!0;ot=Object.keys(i);((et=_w._sydConvConfig)===null||et===void 0?void 0:et.enableSuppressTones)?CIB.config.sydney.responseTones=ot.map(function(n){var t,i,r=(i=(t=_w._sydConvConfig)===null||t===void 0?void 0:t["suppressKnob".concat(n)])!==null&&i!==void 0?i:0;return{tone:n,disabled:r}}):CIB.config.sydney.responseToneOptions=ot;wt?nr(pt):bt&&CIB.config.sydney.request.optionsSets.push(i[r])}function y(n){var u,f=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableStreamSyntheticTextResponses,!1);f&&(CIB.config.messaging.streamSyntheticTextResponses=n===r&&i[r]==="galileo"?!0:!1)}function ki(n){if(!n)return l.Demote;for(var t in l)if(t.toLowerCase().trim()===n.toLowerCase().trim())return l[t];return l.Demote}function di(){var t=sj_cook.get(n.userCook,hi),i=ki(t);CIB.config.sydney.bingFirstPageAdultFilter=i}function ht(){var t=sj_cook.get(n.userCook,rt),i=sj_cook.get(c,c);return t===i}function gi(){var t=sj_cook.get(c,c);sj_cook.set(n.userCook,rt,t,!0,"/",null);f("SystemEvent","MuidConsentProvided","MuidUser","1")}function p(){var i,r=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableToneCookExpiry,!1),u=r?n.toneCook:n.userCook;return sj_cook.get(u,n.toneCrumb)}function nr(u){var s,h,c,l,a,v=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableToneCookExpiry,!1),b=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableBalancedSerp,!1),g=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableSuperOptionsSets,!1),nt=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableBalancedSerpLog,!1),e=p(),k,d;if(nt&&e!=r&&f("SystemEvent","BalSerpOverride","Tone",{tone:e}),tr()?(CIB.responseTone=ft[ct(tt).toLowerCase().trim()],lt(CIB.responseTone,!1,v),f("SystemEvent","InitialTone","Tone",{tone:e})):!b&&e!=null&&i.hasOwnProperty(e)?(CIB.responseTone=e,f("SystemEvent","InitialTone","Tone",{tone:e})):(v&&(k=sj_cook.get(n.userCook,n.hasSetToneCrumb),k=="1"&&(sj_cook.set(n.userCook,n.hasSetToneCrumb,"0",!0,"/",null),f("SystemEvent","ResetTone","Tone",{}))),CIB.responseTone=u,e=u,f("SystemEvent","DefaultTone","Tone",{tone:e})),g&&CIB.config.sydney.request.optionsSets.push(oi),!b&&i.hasOwnProperty(e)?(CIB.config.sydney.request.optionsSets.push(i[e]),CIB.config.sydney.request.optionsSets=w(CIB.config.sydney.request.optionsSets,e),o=e,y(o)):b&&i.hasOwnProperty(r)&&(CIB.config.sydney.request.optionsSets.push(i[r]),CIB.config.sydney.request.optionsSets=w(CIB.config.sydney.request.optionsSets,r),o=r,y(r)),d=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.isCompliantSydneyEndpointEnabled,!1),!d&&CIB.onResponseToneChanged)CIB.onResponseToneChanged(function(n){lt(n,!0,v)})}function ct(n){var i=_w.location.search,r=new URLSearchParams(i),t=r.get(n);return t?t:""}function tr(){var n,r=t((n=_w._sydConvConfig)===null||n===void 0?void 0:n.enableSetToneFromUrl,!1),i;return r?(i=ct(tt),i&&ft.hasOwnProperty(i.toLowerCase().trim())):!1}function lt(t,r,u){var h=[i[t]].concat(e[t]).toString(),f,s;t!==p()&&(at("ChangedTone","Tone",{newTone:t}),r&&(u?(f=rr(),sj_cook.set(n.toneCook,n.toneCrumb,t,!0,"/",f),sj_cook.set(n.toneCook,n.toneOptsCrumb,h,!0,"/",f),sj_cook.set(n.userCook,n.hasSetToneCrumb,"1",!0,"/",null)):(sj_cook.set(n.userCook,n.toneCrumb,t,!0,"/",null),sj_cook.set(n.userCook,n.toneOptsCrumb,h,!0,"/",null))),i.hasOwnProperty(t)&&(s=fr(CIB.config.sydney.request.optionsSets,Object.keys(i)),s!==-1&&(CIB.config.sydney.request.optionsSets[s]=i[t]),CIB.config.sydney.request.optionsSets=w(CIB.config.sydney.request.optionsSets,t,o),o=t,y(o)))}function ir(){var u,f,e,o=n.getConfigOrDefault((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableBalancedSerp,!1),t,i,s;o&&!et&&(et=!0,o&&(t=n.getCookieTone(),t!=null&&t!=r&&(i=CIB.manager.conversation._lastMessage,s=(e=(f=CIB===null||CIB===void 0?void 0:CIB.config)===null||f===void 0?void 0:f.greeting)===null||e===void 0?void 0:e.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,n.shouldResetBotGreeting=!1,CIB.responseTone=t,n.lastQuery="",i&&i.text&&CIB.registerContext([{author:"bot",source:"serpBalResp",text:i.text}]),n.shouldResetBotGreeting=!0,CIB.config.greeting.shouldSendBotGreeting=s,n.SydLog("SystemEvent","SetCookToneAfterSERP","Tone",{tone:t}))))}function rr(){var n=new Date;return n.setDate(n.getDate()+(n.getHours()<2?1:2)),n.setHours(2),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),(n.getTime()-(new Date).getTime())/6e4}function w(n,t,i){return i===void 0&&(i=""),i!=""&&e.hasOwnProperty(i)&&(n=ur(n,e[i])),t!=""&&e.hasOwnProperty(t)&&e[t].forEach(function(t){t&&n.push(t)}),n}function ur(n,t){return t.forEach(function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}),n}function fr(n,t){for(var f,u,r=0;r<t.length;r++)if(f=t[r],u=n.indexOf(i[f]),u>=0)return u;return-1}function b(n,t){var i={};return t?n.locType&&(i.LocationType=n.locType):n.accuracy&&(i.Accuracy=n.accuracy),n.state&&(i.State=decodeURI(n.state)),n.city&&(i.City=decodeURI(n.city)),n.lat&&n.long&&(i.Center={Latitude:parseFloat(n.lat),Longitude:parseFloat(n.long)}),n.source&&(i.LocationSource=n.source),n.altitude&&(i.Altitude=n.altitude),n.altitudeAcc&&(i.AltitudeAccuracy=n.altitudeAcc),n.displayName&&(i.DisplayName=n.displayName),n.name&&(i.Name=n.name),n.heading&&(i.Heading=n.heading),n.isValidLocation&&(i.IsValidLocation=n.isValidLocation),n.range&&(i.Radius=n.range),n.speed&&(i.Speed=n.speed),n.ts&&(i.Timestamp=n.ts),n.ets&&(i.ExpiryTimestamp=n.ets),i}function er(){var t=(new Date).getTimezoneOffset(),r=Math.floor(Math.abs(t/60)),f=Math.abs(t%60),i;t<0?i="+"+u(r)+":"+u(f):t>0?i="-"+u(r)+":"+u(f):t==0&&(i="Z");var n=new Date,e=n.getDate(),o=n.getMonth()+1,s=n.getFullYear(),h=n.getHours(),c=n.getMinutes(),l=n.getSeconds();return u(s)+"-"+u(o)+"-"+u(e)+"T"+u(h)+":"+u(c)+":"+u(l)+i}function u(n){return n<10?"0"+n:n}function s(n,t){if(t){var i=t.split(",");return n.concat(i)}return n}function t(n,t){return typeof n!="undefined"?n:t}function f(n,i,r,u){var f,e,o=[],s=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.isCompliantSydneyEndpointEnabled,!1),h;s&&o.push("isBizChat",s.toString());h=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.enableTelemetryPrivacy,!1);h&&(u=or(u));Log.Log.apply(Log,__spreadArray([n,"Codex",i,!1,"Namespace",r,"CustomData",JSON.stringify(u)],o,!1))}function or(n){return ci.forEach(function(t){var i,r;n[t]!==undefined&&(n[t]=v);((i=n.CustomData)===null||i===void 0?void 0:i[t])!==undefined&&(n.CustomData[t]=v);((r=n.EncryptedData)===null||r===void 0?void 0:r[t])!==undefined&&(n.EncryptedData[t]=v)}),n}function at(n,t,i){f("InteractionEvent",n,t,i)}function sr(){history&&sj_be(_w,"popstate",function(t){var i,r;((i=t===null||t===void 0?void 0:t.state)===null||i===void 0?void 0:i.inConvMode)&&_G[n.SYD_MODE]=="serp"?sj_evt.fire("showSydFSC",null,null,!1,!0):((r=t===null||t===void 0?void 0:t.state)===null||r===void 0?void 0:r.inConvMode)||_G[n.SYD_MODE]!="conversation"||sj_evt.fire("hideSydFSC",!0)})}function hr(n){history&&history.pushState({inConvMode:n},"conv")}function cr(){var t,n;((t=history===null||history===void 0?void 0:history.state)===null||t===void 0?void 0:t.inConvMode)&&(n=_ge("sb_form_q"),n&&n.value?sj_evt.fire("showSydFSC",n.value):sj_evt.fire("showSydFSC"))}function lr(){function b(n){if(n&&n.length>=2){var t=n[1].waitlist;t&&t=="2"&&(CIB.config.features.enableMUIDUserMode=!1,CIB.config.messaging.maxTurnsPerConversation=rt,sj_evt.unbind("rewready",b))}}var i,r,u,f,e,o,s,h,c,l,g=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableSydTigerAns,!1),nt=t((r=_w._sydConvConfig)===null||r===void 0?void 0:r.enableSydAjaxReset,!1),p,w,v,k,d,y;CIB.onModeChanged(function(t){switch(t){case"conversation":sj_evt.fire("showSydFSC");break;case"off-stage":if(n.ignoreFirstOffStage){n.ignoreFirstOffStage=!1;CIB.showConversation();break}sj_evt.fire("hideSydFSC");break;default:Log.Log("ClientInst","Codex","ModeChangeError",!1,"CustomData",JSON.stringify({mode:t}))}});if(g&&(p=_ge("b_sydTigerCont"),p)){w=_d.querySelector("#b_pole #b_sydTigerCont")!=null;CIB.onSerpSlotSuggestionInvoked(function(){_G[n.SYD_MODE]!="conversation"&&(n.LogIntEvent("ConversationViewEnter",w?"Pole":"RightRail",{source:"ChatBubble"}),sj_evt.fire("showSydFSC"))});v=_ge("sb_form_q");v&&(CIB.config.sydney.slottedModeTurnIndex=wt()&&((e=(f=(u=CIB===null||CIB===void 0?void 0:CIB.vm)===null||u===void 0?void 0:u.conversation)===null||f===void 0?void 0:f.turns)===null||e===void 0?void 0:e.length)?Math.max(CIB.vm.conversation.turns.length-1,0):0,n.lastQuery=v.value.toLowerCase().trim())}nt&&sj_evt.bind("ajax.unload",function(){var n,t,i,r,u,f,e,o,s,h,c;CIB&&(c=(t=(n=CIB===null||CIB===void 0?void 0:CIB.config)===null||n===void 0?void 0:n.greeting)===null||t===void 0?void 0:t.shouldSendBotGreeting,CIB.config.greeting.shouldSendBotGreeting=!1,(u=(r=(i=CIB===null||CIB===void 0?void 0:CIB.manager)===null||i===void 0?void 0:i.stream)===null||r===void 0?void 0:r.subscription)===null||u===void 0?void 0:u.dispose(),(e=(f=CIB===null||CIB===void 0?void 0:CIB.manager)===null||f===void 0?void 0:f.stream)===null||e===void 0?void 0:e.complete(),(s=(o=CIB===null||CIB===void 0?void 0:CIB.manager)===null||o===void 0?void 0:o.stream)===null||s===void 0?void 0:s.finalizeStreamSubscription(),(h=CIB===null||CIB===void 0?void 0:CIB.manager)===null||h===void 0?void 0:h.resetConversation(),CIB.config.greeting.shouldSendBotGreeting=c)});var tt=t((o=_w._sydConvConfig)===null||o===void 0?void 0:o.codexMUIDUser,!1),it=t((s=_w._sydConvConfig)===null||s===void 0?void 0:s.enableSigninTurnFix,!0),rt=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.maxTurnsPerConversation,a);if(tt&&it&&sj_evt.bind("rewready",b,!0),CIB.onModalVisibilityChanged)CIB.onModalVisibilityChanged(function(n){var t=_ge("b_header");t&&(n?Lib.CssClass.add(t,ut):Lib.CssClass.remove(t,ut))});k=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableThreads,!1);d=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.isAccountLinkedWithActiveAAD,!1);!k&&d&&(y=_qs("body"),y&&Lib.CssClass.add(y,li))}function ar(n){var i,u=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.enableTigerCachedAttr,!1),r;n&&(u&&(this.config.messaging.streamCachedResponses=!1,r=_d.querySelector("#b_sydTigerCont cib-serp"),r&&r.setAttribute("cached","")),this.processCachedResponse(n))}function k(n){var t=_ge(n);t&&t.parentElement&&t.parentElement.removeChild(t)}function vr(n){CIB.processCachedResponse(n)}function yr(){var u,f,o=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.enableSydTestCache,!1),r,i,e;o&&(r=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.sydTestCacheMsg,""),i=null,r&&r.indexOf('{"messages":')==0&&(i=JSON.parse(r)),e=ar.bind(CIB),CIB.sendSearchQuery=function(){e(i)},CIB.addMessage=function(){e(i)},n.processCachedResponseUsingCIB=function(){CIB.processCachedResponse(i)})}function vt(n,t,i,r,u,f,e){n===void 0&&(n="");t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);e===void 0&&(e=!1);sj_evt.fire("showSydFSC",n,t,r,u,i,f,e)}function pr(){var i=new RegExp("[?&]{1}q=([^&]+)"),n=_w.location.search.match(i),t=n?n[1]:null;return t?decodeURIComponent(t.replace("+"," ")):""}function h(){var i,r,u,e=t((i=_w._sydConvConfig)===null||i===void 0?void 0:i.isSapphireClient,!1),f,n;return e?pr():(f=typeof sj_b!="undefined"&&sj_b!=null?sj_b:_d.body,n=f.querySelectorAll("textarea.b_searchbox, input.b_searchbox:not(#uaseabox)"),!n||n.length<=0)?"":(u=(r=n[0])===null||r===void 0?void 0:r.getAttribute("value"))!==null&&u!==void 0?u:""}function wr(){var t=new URLSearchParams(_w.location.search),i=t.get(it);i&&(n.lastQuery=h().toLowerCase().trim())}function yt(n,t,i,r,u,f){var o,e,s;t===void 0&&(t=!1);i===void 0&&(i="");r===void 0&&(r="");u===void 0&&(u=!1);f===void 0&&(f=!1);o="";t&&(o=h());e=i;e||(s=_d.querySelector(".b_ans #b_wpt_data"),s&&(e=s.getAttribute("data-sydctx")));vt(n,e,o,r,!1,u,f)}function br(n,t){n===void 0&&(n="");t===void 0&&(t="");var i=h();yt(i,!1,n,t,!1,!0)}function kr(t){n.isSydFSCEligible=t}function dr(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t]}function gr(){sj_evt.fire("clarity.trigger","cibChat")}function nu(n,t,i){return!n||t&&(!i||i.toLowerCase().trim()!==h().toLowerCase().trim())}function tu(t,i){var l,a,v,y,p,w,b,d,et,o,tt,u,e,ft,vt,h,yt,r,c,wt,bt,kt,dt;i===void 0&&(i=!1);et=n.getConfigOrDefault((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableSydCarouselHistory,!1);pt();var f=sj_ce("div","b_metaCont"),ot=sj_ce("div","b_metaCont_Title"),gt=n.getConfigOrDefault((a=_w._sydConvTranslation)===null||a===void 0?void 0:a.sydneyCarouselTitle,"");ot.textContent=gt;f.appendChild(ot);o=sj_ce("div","b_meta_bot");f.appendChild(o);tt=sj_ce("div","b_metaChat");u=sj_ce("div","b_metaCont_PillCont","b_meta_hideEx");i?u.appendChild(tt):o.appendChild(tt);o.appendChild(u);var st=n.getConfigOrDefault((v=_w._sydConvConfig)===null||v===void 0?void 0:v.carouselQueries,""),ni=n.getConfigOrDefault((y=_w._sydConvConfig)===null||y===void 0?void 0:y.sydCarPropQuery,!1),ht=st?st.split(","):null,it=ht?ht:CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."}).map(function(n){return n.text}),ct=0,fi=i?_w.innerWidth-g-ii:ti,ei=_w.innerWidth-g-nt,lt=!i,at=fi-nt,oi=CIB.vm.conversation.model._id,rt=!0;for(e=it.length-1;e>=0;e--){var si=it[e],s=si.split("`"),ut=s.length==1?s[0]:s.length==3?s[1]:"";rt&&(ft=iu(ut)+2*ri+ui,ct+ft<at?ct+=ft:lt?(rt=!1,vt=e+1,h=sj_ce("div","b_meta_exp","b_metaCont_Pill"),h.innerText="+"+vt.toString(),sj_be(h,"click",function(){Lib.CssClass.add(u,"b_metaExpanded")}),u.append(h)):(at=ei,lt=!0));yt="cdxche";r=sj_ce("a",null,"b_metaCont_Pill"+(rt?"":" b_hide"));r.href=_w.location.origin+_w.location.pathname+"?q="+ut+"&form="+yt;et&&(r.href=r.href+"&convid="+oi);ni&&(r.href=r.href+"&features=sydcarousel,sydcpropq");r.textContent=ut;r.target="_blank";sj_be(r,"click",function(t){var r=_ge("CodexCarouselInstLink"),i;_w.si_ct&&_w.si_ct(r);i=t===null||t===void 0?void 0:t.target;n.LogIntEvent("QueryCarouselClick","QueryCarousel",{query:i===null||i===void 0?void 0:i.textContent})});u.appendChild(r)}c=sj_ce("div","b_meta_col","b_metaCont_Pill b_hide");c.innerText=n.getConfigOrDefault((p=_w._sydConvTranslation)===null||p===void 0?void 0:p.sydneyCarouselCollapse,"Collapse");sj_be(c,"click",function(){Lib.CssClass.remove(u,"b_metaExpanded")});u.append(c);it.length>0&&(wt=n.getConfigOrDefault((w=_w._sydConvConfig)===null||w===void 0?void 0:w.suppressAlsoTryWhenEnableSydCarousel,!1),wt&&k("b_alsotry"),bt=n.getConfigOrDefault((b=_w._sydConvConfig)===null||b===void 0?void 0:b.suppressPoleRSWhenEnableSydCarousel,!1),bt&&k("brspole"),kt=n.getConfigOrDefault((d=_w._sydConvConfig)===null||d===void 0?void 0:d.suppressPoleRecommendedSearchWhenEnableSydCarousel,!1),kt&&k("polerecommendedsearch"),t.children.length>0?(dt=_w.getComputedStyle(t,null),dt.paddingLeft=="0px"&&Lib.CssClass.add(f,"b_metaPadding"),t.insertBefore(f,t.children[0])):t.appendChild(f))}function iu(n){var i=sj_ce("canvas"),t=i.getContext("2d");return t.font="14px Roboto",t.measureText(n).width}function pt(){var n=_ge("b_metaCont");n&&n.parentElement&&n.parentElement.removeChild(n)}function d(n,i,r){var f,e,o,s,h,c,l,a,v,u=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.Syd2TFlights,""),y=t((e=_w._sydConvConfig)===null||e===void 0?void 0:e.disable2TSearchHistory,!1);((s=(o=CIB.config)===null||o===void 0?void 0:o.answers)===null||s===void 0?void 0:s.query)&&(CIB.config.answers.query.IG=_G.IG,CIB.config.answers.query.IID=(h=_ge("b_sydConvCont"))===null||h===void 0?void 0:h.getAttribute("_iid"),CIB.config.answers.query.cw=n,CIB.config.answers.query.ch=i,u!==""&&(CIB.config.answers.query.features=u),y&&(CIB.config.answers.query.dissrchswrite="1"));((l=(c=CIB.config)===null||c===void 0?void 0:c.ads)===null||l===void 0?void 0:l.query)&&(CIB.config.ads.query.IG=_G.IG,CIB.config.ads.query.IID=r?(a=_ge("CodexAdsInstLink"))===null||a===void 0?void 0:a.getAttribute("_iid"):(v=_ge("b_sydConvCont"))===null||v===void 0?void 0:v.getAttribute("_iid"),CIB.config.ads.query.cw=n,CIB.config.ads.query.ch=i,u!==""&&(CIB.config.ads.query.features=u),CIB.config.ads.query.form="codexx",y&&(CIB.config.ads.query.dissrchswrite="1"))}function ru(){var n=new URLSearchParams(_w.location.search),t=n.get("showconv"),i=n.get("sendquery");return i==="1"||t!=="1"}function uu(i,r,u,f){var h,c,l,a,v,y,w=t((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableSydContext,!1),b=t((c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableSQMsg,!1),k=t((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enableConvModeSwitchAjax,!1),d=t((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableCodexMuidConsentTop,!1),g=t((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableCodexMuidConsentExplicit,!1),nt=t((y=_w._sydConvConfig)===null||y===void 0?void 0:y.enableCodexMuidConsentImplicit,!1),tt=d||g||nt,e,o,p,s;if(i&&i!=n.lastQuery&&ru()&&i!=n.firstQuery&&(!tt||ht())){if(k){if(n.isSmoothConvSwitchUpdatedPage())return;try{if(e=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),e&&e.length>0&&(o=e[e.length-1].text.split("`"),p=o.length==1?o[0]:o.length==3?o[1]:"",p.toLowerCase()==i.toLowerCase()))return}catch(it){}}s=[];u&&s.push({author:"user",text:u});r&&s.push({author:"bot",text:r});w&&s.length!=0&&CIB.registerContext(s);b&&f&&!CIB.manager.conversation._lastMessage&&!CIB.manager.conversation.messages.length?CIB.sendSearchQuery(i):CIB.addMessage(i);n.lastQuery=i;n.firstQuery.length==0&&(n.firstQuery=i)}}function fu(n,t){return new Promise(function(i,r){var u=sj_gx();u.onreadystatechange=function(){u.readyState===4&&u.status===200&&i(u)};u.onerror=function(){r(u)};u.open("POST",n,!0);u.setRequestHeader("content-type","application/json");u.send(t)})}function eu(n){var u,f,i,r;return n?(i=t((u=_w._sydConvConfig)===null||u===void 0?void 0:u.tigerEnhancedPromptTemplate,""),!i)?n:(i=i.replace("{0}",n),r=t((f=_w._sydConvConfig)===null||f===void 0?void 0:f.language,""),r&&r.indexOf("English")<0&&(i+=" Respond in language "+r),i):n}function ou(){var i,r,u,f,e,o,s,h,n=(h=(s=(o=(e=(f=(u=(r=(i=_d.querySelector("cib-serp"))===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-conversation"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector(".main cib-welcome-container"))===null||e===void 0?void 0:e.shadowRoot)===null||o===void 0?void 0:o.querySelector("cib-tone-selector"))===null||s===void 0?void 0:s.shadowRoot)===null||h===void 0?void 0:h.querySelector("#tone-options"),t;n&&(t=sj_ce("style"),t.type="text/css",t.innerHTML=":host { --cib-type-body1-stronger-font-size:12px; }",n===null||n===void 0?void 0:n.appendChild(t))}function wt(){var n,t=new URLSearchParams(_w===null||_w===void 0?void 0:_w.location.search);return t.has("form")&&((n=t.get("form"))===null||n===void 0?void 0:n.toLowerCase())==="convaj"&&_w._isConvAjaxUpdated}var bt="sydneyOptionsSets",kt="codexFeatures",dt="Creative",r="Balanced",gt="Precise",a=5,ni=2e3,ti=750,g=48,ii=42,ri=16,ui=6,nt=60,fi=66,ei=1e3,oi="so_bing_chat",tt="seltone",it;n.SYD_MODE="SydMode";n.SYD_PREV_MODE="SydPrevMode";n.lastQuery=(n===null||n===void 0?void 0:n.lastQuery)?n===null||n===void 0?void 0:n.lastQuery:"";n.firstQuery="";n.ignoreFirstOffStage=!1;n.shouldResetBotGreeting=!0;n.shouldForceSendBotGreeting=!1;it="shareId";n.userCook="SRCHHPGUSR";n.toneCook="CDXTC";n.toneCrumb="cdxtone";n.toneOptsCrumb="cdxtoneopts";n.hasSetToneCrumb="cdxts";var si="cdxwinturn",hi="ADLT",c="MUID",rt="CMUID",ci=["chips","query","searchQuery","text"],v="<stripped/>",ut="cdxModalVisible",li="aad",i={Creative:"h3imaginative",Balanced:"harmonyv3",Precise:"h3precise"},ft={c:"Creative",b:"Balanced",p:"Precise"},e={Creative:[],Balanced:[],Precise:[]},o="",et=!1,l={Off:"1",Demote:"2",Strict:"4",KidSafe:"8",Stricter:"16",AdultOnly:"32"};n.isSydFSCEligible=n.isSydFSCEligible?n.isSydFSCEligible:!1;n.isConfigSet=!1;n.enableCreatorSendQueryWhenShowConvQuery=!0;n.MIN_WIDTH_MOBILE=288;n.setConfigs=ai;n.getMobileBrowserWidth=ot;n.getMobileBrowserHeight=st;n.getCookieTone=p;n.updateResponseToneAfterSerp=ir;n.getConfigOrDefault=t;n.SydLog=f;n.LogIntEvent=at;n.setupHistory=sr;n.pushSydHistory=hr;n.checkInitialState=cr;n.setEventListeners=lr;n.processCachedResponseUsingCIB=vr;n.setTestMocks=yr;n.triggerSydFSC=vt;n.getQuery=h;n.triggerShareFlow=wr;n.triggerSydFSCWithContext=yt;n.triggerSydFSCQueryWithContext=br;n.setSydFSCEligibleState=kr;n.sydPayWallTrace=dr;n.triggerClarity=gr;n.shouldMove1TAnswers=nu;n.addCarousel=tu;n.removeQueries=pt;n.set2TQueryConfigs=d;n.sendFirstQuery=uu;n.createRequest=fu;n.createIntelligentQuery=eu;n.updateToneFontSize=ou;n.isSmoothConvSwitchUpdatedPage=wt;sj_evt.fire("SydFSCHelperLoaded")})(SydFSCHelper||(SydFSCHelper={}))